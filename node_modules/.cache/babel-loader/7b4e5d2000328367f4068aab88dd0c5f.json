{"ast":null,"code":"import _slicedToArray from\"/Users/rims/Documents/musicuizz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{readRemoteFile}from'react-papaparse';export default function TableCsvName(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),header=_useState2[0],setHeader=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),rows=_useState4[0],setRows=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];var _useState7=useState(\"first names\"),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),order=_useState10[0],setOrder=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];// {/**\n//   filter a key in the array, return true if find it in any row of array then return tue object array filtered\n// */}\nfunction filterData(){return!query?rows:rows.filter(function(obj){var flag=false;Object.values(obj).forEach(function(val){if(String(val?val.toLowerCase():val).indexOf(query.toLowerCase())>-1){flag=true;return null;}});if(flag)return obj;return null;});}// {/**\n//   function : sort a column giving the key name\n// */}\nvar sorting=function sorting(key){setOrder(order*-1);setRows(rows.sort(function(a,b){return(order===1?a[key]>b[key]:a[key]<b[key])?1:-1;}));};var getNamesData=function getNamesData(name){setLoading(true);readRemoteFile(name,{complete:function complete(results){if(results){setHeader(results.data.shift());setRows(results.data);}}});setLoading(false);};useEffect(function(){getNamesData('/images/first_name.csv');setTitle(\"First names\");},[]);// useEffect(() => {\n//   setLoading(false);\n// }, [rows])\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h1\",{className:\" card-title text-center pt-1\"},\"Popular names : \",title,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-2 mb-2 justify-content-center\"},/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-pill badge-secondary mr-1 ml-1\",onClick:function onClick(){getNamesData('/images/first_name.csv');setLoading(true);setTitle(\"First names\");}},\"name\"),/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-pill badge-secondary mr-1\",onClick:function onClick(){getNamesData('/images/year_name.csv');setLoading(true);setTitle(\"Names by Years\");}},\"year\"),/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-pill badge-secondary mr-1\",onClick:function onClick(){getNamesData('/images/family_name.csv');setLoading(true);setTitle(\"Family names\");}},\"family\"),/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-pill badge-secondary mr-1\",onClick:function onClick(){getNamesData('/images/location_name.csv');setLoading(true);setTitle(\"Names by location\");}},\"location\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend pb-0 pl-2 pr-2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control border search\",placeholder:\"Search ...\",value:query,onChange:function onChange(e){return setQuery(e.target.value);},\"aria-label\":\"search place\",\"aria-describedby\":\"alcohol\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},loading?/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-center\"},/*#__PURE__*/React.createElement(\"img\",{height:\"50\",width:\"50\",src:\"/images/loading.gif\",alt:\"LOADING\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"LOADING...\")):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table tablesorter \",id:\"\"},/*#__PURE__*/React.createElement(\"thead\",{className:\" text-primary\"},/*#__PURE__*/React.createElement(\"tr\",null,header&&header.map(function(name,ii){return/*#__PURE__*/React.createElement(\"th\",{key:ii,onClick:function onClick(){return sorting(name);}},name,\"\\u2195\");}))),/*#__PURE__*/React.createElement(\"tbody\",null,filterData()&&filterData().map(function(numList,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},numList.map(function(num,j){return/*#__PURE__*/React.createElement(\"td\",{key:j},num);}));})))))));}","map":{"version":3,"sources":["/Users/rims/Documents/musicuizz/frontend/src/components/template/TableCsvName.tsx"],"names":["React","useState","useEffect","readRemoteFile","TableCsvName","header","setHeader","rows","setRows","query","setQuery","title","setTitle","order","setOrder","loading","setLoading","filterData","filter","obj","flag","Object","values","forEach","val","String","toLowerCase","indexOf","sorting","key","sort","a","b","getNamesData","name","complete","results","data","shift","e","target","value","map","ii","numList","i","num","j"],"mappings":"+JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,cAAT,KAA+B,iBAA/B,CAEA,cAAe,SAASC,CAAAA,YAAT,EAAwB,eACTH,QAAQ,CAAM,EAAN,CADC,wCAC9BI,MAD8B,eACtBC,SADsB,8BAEbL,QAAQ,CAAM,EAAN,CAFK,yCAE9BM,IAF8B,eAExBC,OAFwB,8BAGXP,QAAQ,CAAS,EAAT,CAHG,yCAG9BQ,KAH8B,eAGvBC,QAHuB,8BAIXT,QAAQ,CAAS,aAAT,CAJG,yCAI9BU,KAJ8B,eAIvBC,QAJuB,8BAKXX,QAAQ,CAAS,CAAT,CALG,0CAK9BY,KAL8B,gBAKvBC,QALuB,gCAMPb,QAAQ,CAAU,IAAV,CAND,2CAM9Bc,OAN8B,gBAMrBC,UANqB,gBASrC;AACA;AACA;AACA,QAASC,CAAAA,UAAT,EAAsB,CACpB,MAAO,CAACR,KAAD,CACHF,IADG,CAELA,IAAI,CAACW,MAAL,CAAY,SAACC,GAAD,CAAc,CACxB,GAAIC,CAAAA,IAAa,CAAG,KAApB,CACAC,MAAM,CAACC,MAAP,CAAcH,GAAd,EAAmBI,OAAnB,CAA2B,SAACC,GAAD,CAAc,CACvC,GAAIC,MAAM,CAACD,GAAG,CAAGA,GAAG,CAACE,WAAJ,EAAH,CAAuBF,GAA3B,CAAN,CAAsCG,OAAtC,CAA8ClB,KAAK,CAACiB,WAAN,EAA9C,EAAqE,CAAC,CAA1E,CAA6E,CAC3EN,IAAI,CAAG,IAAP,CACA,MAAO,KAAP,CACD,CACF,CALD,EAMA,GAAIA,IAAJ,CAAU,MAAOD,CAAAA,GAAP,CACV,MAAO,KAAP,CACD,CAVD,CAFF,CAaD,CAED;AACA;AACA;AACA,GAAMS,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,GAAD,CAAiB,CAC/Bf,QAAQ,CAACD,KAAK,CAAG,CAAC,CAAV,CAAR,CACAL,OAAO,CAACD,IAAI,CAACuB,IAAL,CAAU,SAACC,CAAD,CAASC,CAAT,QAChB,CAACnB,KAAK,GAAK,CAAV,CAAckB,CAAC,CAACF,GAAD,CAAD,CAASG,CAAC,CAACH,GAAD,CAAxB,CAAgCE,CAAC,CAACF,GAAD,CAAD,CAASG,CAAC,CAACH,GAAD,CAA3C,EAAoD,CAApD,CAAwD,CAAC,CADzC,EAAV,CAAD,CAAP,CAGD,CALD,CAOA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAe,CAClClB,UAAU,CAAC,IAAD,CAAV,CACAb,cAAc,CAAC+B,IAAD,CAAO,CACnBC,QAAQ,CAAE,kBAACC,OAAD,CAAkB,CAC1B,GAAIA,OAAJ,CAAa,CACX9B,SAAS,CAAC8B,OAAO,CAACC,IAAR,CAAaC,KAAb,EAAD,CAAT,CACA9B,OAAO,CAAC4B,OAAO,CAACC,IAAT,CAAP,CACD,CACF,CANkB,CAAP,CAAd,CAQArB,UAAU,CAAC,KAAD,CAAV,CACD,CAXD,CAaAd,SAAS,CAAC,UAAM,CACd+B,YAAY,CAAC,wBAAD,CAAZ,CACArB,QAAQ,CAAC,aAAD,CAAR,CACD,CAHQ,CAGN,EAHM,CAAT,CAKA;AACA;AACA;AAGA,mBACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,0BAAI,SAAS,CAAC,8BAAd,qBAA8DD,KAA9D,KADF,CADF,cAIE,2BAAK,SAAS,CAAC,yCAAf,eACE,4BAAM,SAAS,CAAC,4CAAhB,CAA6D,OAAO,CAAE,kBAAM,CAAEsB,YAAY,CAAC,wBAAD,CAAZ,CAAwCjB,UAAU,CAAC,IAAD,CAAV,CAAkBJ,QAAQ,CAAC,aAAD,CAAR,CAAyB,CAAjK,SADF,cAEE,4BAAM,SAAS,CAAC,uCAAhB,CAAwD,OAAO,CAAE,kBAAM,CAAEqB,YAAY,CAAC,uBAAD,CAAZ,CAAuCjB,UAAU,CAAC,IAAD,CAAV,CAAkBJ,QAAQ,CAAC,gBAAD,CAAR,CAA4B,CAA9J,SAFF,cAGE,4BAAM,SAAS,CAAC,uCAAhB,CAAwD,OAAO,CAAE,kBAAM,CAAEqB,YAAY,CAAC,yBAAD,CAAZ,CAAyCjB,UAAU,CAAC,IAAD,CAAV,CAAkBJ,QAAQ,CAAC,cAAD,CAAR,CAA0B,CAA9J,WAHF,cAIE,4BAAM,SAAS,CAAC,uCAAhB,CAAwD,OAAO,CAAE,kBAAM,CAAEqB,YAAY,CAAC,2BAAD,CAAZ,CAA2CjB,UAAU,CAAC,IAAD,CAAV,CAAkBJ,QAAQ,CAAC,mBAAD,CAAR,CAA+B,CAArK,aAJF,CAJF,cAUE,2BAAK,SAAS,CAAC,oCAAf,eACE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,4BAA7B,CAA0D,WAAW,CAAC,YAAtE,CAAmF,KAAK,CAAEH,KAA1F,CAAiG,QAAQ,CAAE,kBAAC8B,CAAD,QAAO7B,CAAAA,QAAQ,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAA3G,CAA4I,aAAW,cAAvJ,CAAsK,mBAAiB,SAAvL,EADF,CAVF,cAaE,2BAAK,SAAS,CAAC,WAAf,EACG1B,OAAO,cAAI,2BAAK,SAAS,CAAC,oBAAf,eAAoC,2BAAK,MAAM,CAAC,IAAZ,CAAiB,KAAK,CAAC,IAAvB,CAA4B,GAAG,CAAC,qBAAhC,CAAsD,GAAG,CAAC,SAA1D,EAApC,cAA0G,2CAA1G,CAAJ,CAA2I,EADrJ,cAEE,2BAAK,SAAS,CAAC,kBAAf,eACE,6BAAO,SAAS,CAAC,oBAAjB,CAAsC,EAAE,CAAC,EAAzC,eACE,6BAAO,SAAS,CAAC,eAAjB,eACE,8BACGV,MAAM,EAAKA,MAAM,CAACqC,GAAP,CAAW,SAACR,IAAD,CAAeS,EAAf,qBACrB,0BAAI,GAAG,CAAEA,EAAT,CAAa,OAAO,CAAE,yBAAMf,CAAAA,OAAO,CAACM,IAAD,CAAb,EAAtB,EAA6CA,IAA7C,UADqB,EAAX,CADd,CADF,CADF,cAQE,iCACGjB,UAAU,IACRA,UAAU,GAAGyB,GAAb,CAAiB,SAACE,OAAD,CAAeC,CAAf,qBAChB,0BAAI,GAAG,CAAEA,CAAT,EAEID,OAAO,CAACF,GAAR,CAAY,SAACI,GAAD,CAAWC,CAAX,qBACV,0BAAI,GAAG,CAAEA,CAAT,EAAaD,GAAb,CADU,EAAZ,CAFJ,CADgB,EAAjB,CAFL,CARF,CADF,CAFF,CAbF,CADF,CADF,CA4CD","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { readRemoteFile } from 'react-papaparse'\n\nexport default function TableCsvName() {\n  const [header, setHeader] = useState<any>([]);\n  const [rows, setRows] = useState<any>([]);\n  const [query, setQuery] = useState<string>(\"\");\n  const [title, setTitle] = useState<string>(\"first names\");\n  const [order, setOrder] = useState<number>(1);\n  const [loading, setLoading] = useState<boolean>(true);\n\n\n  // {/**\n  //   filter a key in the array, return true if find it in any row of array then return tue object array filtered\n  // */}\n  function filterData() {\n    return !query\n      ? rows :\n      rows.filter((obj: any) => {\n        let flag: Boolean = false;\n        Object.values(obj).forEach((val: any) => {\n          if (String(val ? val.toLowerCase() : val).indexOf(query.toLowerCase()) > -1) {\n            flag = true;\n            return null;\n          }\n        });\n        if (flag) return obj;\n        return null;\n      });\n  }\n\n  // {/**\n  //   function : sort a column giving the key name\n  // */}\n  const sorting = (key: string) => {\n    setOrder(order * -1);\n    setRows(rows.sort((a: any, b: any) =>\n      (order === 1 ? a[key] > b[key] : a[key] < b[key]) ? 1 : -1\n    ));\n  }\n\n  const getNamesData = (name: any) => {\n    setLoading(true);\n    readRemoteFile(name, {\n      complete: (results: any) => {\n        if (results) {\n          setHeader(results.data.shift());\n          setRows(results.data);\n        }\n      }\n    })\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    getNamesData('/images/first_name.csv');\n    setTitle(\"First names\")\n  }, [])\n\n  // useEffect(() => {\n  //   setLoading(false);\n  // }, [rows])\n\n\n  return (\n    <div className=\"content\">\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h1 className=\" card-title text-center pt-1\">Popular names : {title} </h1>\n        </div>\n        <div className=\"d-flex mt-2 mb-2 justify-content-center\">\n          <span className=\"badge badge-pill badge-secondary mr-1 ml-1\" onClick={() => { getNamesData('/images/first_name.csv'); setLoading(true); setTitle(\"First names\") }}>name</span>\n          <span className=\"badge badge-pill badge-secondary mr-1\" onClick={() => { getNamesData('/images/year_name.csv'); setLoading(true); setTitle(\"Names by Years\") }}>year</span>\n          <span className=\"badge badge-pill badge-secondary mr-1\" onClick={() => { getNamesData('/images/family_name.csv'); setLoading(true); setTitle(\"Family names\") }}>family</span>\n          <span className=\"badge badge-pill badge-secondary mr-1\" onClick={() => { getNamesData('/images/location_name.csv'); setLoading(true); setTitle(\"Names by location\") }}>location</span>\n        </div>\n        <div className=\"input-group-prepend pb-0 pl-2 pr-2\">\n          <input type=\"text\" className=\"form-control border search\" placeholder=\"Search ...\" value={query} onChange={(e) => setQuery(e.target.value)} aria-label=\"search place\" aria-describedby=\"alcohol\" />\n        </div>\n        <div className=\"card-body\">\n          {loading ? (<div className=\"col-12 text-center\"><img height='50' width='50' src='/images/loading.gif' alt='LOADING' /><h2>LOADING...</h2></div>) : \"\"}\n          <div className=\"table-responsive\">\n            <table className=\"table tablesorter \" id=\"\">\n              <thead className=\" text-primary\">\n                <tr>\n                  {header && (header.map((name: string, ii: number) => (\n                    <th key={ii} onClick={() => sorting(name)} >{name}&#8597;</th>)\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {filterData() &&\n                  (filterData().map((numList: any, i: number) => (\n                    <tr key={i} >\n                      {\n                        numList.map((num: any, j: number) =>\n                          <td key={j}>{num}</td>)\n                      }\n                    </tr>)\n                  ))\n                }\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div >\n    </div >\n  )\n}\n"]},"metadata":{},"sourceType":"module"}