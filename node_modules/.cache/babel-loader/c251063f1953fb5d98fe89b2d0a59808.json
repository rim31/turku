{"ast":null,"code":"var _jsxFileName = \"/Users/rims/Documents/musicuizz/frontend/src/components/template/ListImages.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport FetchEventsTurku from '../api/FetchEventsTurku';\nimport { StoreContainer } from '../Store';\nexport default function ListImages() {\n  const unstated = StoreContainer.useContainer();\n  const [allEvents, setAllEvents] = useState(unstated.events);\n  const [query, setQuery] = useState(\"\");\n  const [url, setUrl] = useState(\"https://api.turku.fi/linkedevents/v1/event/?page=1\");\n  const [page, setPage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const getAllEvents = async url => {\n    setLoading(true);\n    const res = await FetchEventsTurku(url);\n\n    if (res) {\n      if (res.data.meta.next) unstated.setNextEvents(res.data.meta.next);\n      if (res.data.meta.previous) unstated.setPreviousEvents(res.data.meta.previous); // console.log(\"res events unstated\", res.data);\n      // console.log(\"unstated.setPreviousEvents\", (res.data.meta.previous));\n      // console.log(\"unstated.setNextEvents\", (res.data.meta.next));\n\n      setAllEvents(res.data.data);\n    }\n\n    setUrl(url);\n    let page;\n    query ? page = url.match(/=(.*)&q/) : page = url.match(/=(.*)/);\n    if (page != null) page = page[1];\n    setPage(page ? page : \"1\");\n    setLoading(false);\n  };\n\n  const search = async e => {\n    if (e.key === \"Enter\") {\n      if (query.trim()) getAllEvents('https://api.turku.fi/linkedevents/v1/event/?page=1');\n      getAllEvents('https://api.turku.fi/linkedevents/v1/search/?type=event&q=' + query); // setQuery('')\n    }\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    if (unstated.events.length === 0) getAllEvents(url);\n    setLoading(false);\n  }, []);\n\n  const parseHtml = htmlString => {\n    let res = htmlString.replaceAll('<p>', '').replaceAll('</p>', '\\n');\n    return res;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Events in TURKU\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: unstated.Events ? \"btn btn-default btn-sm\" : \"btn dt\",\n    onClick: () => getAllEvents(unstated.previousEvents),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Previous\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"Page \", page), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: unstated.Events ? \"btn btn-default btn-sm\" : \"btn dt\",\n    onClick: () => getAllEvents(unstated.nextEvents),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"Next\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend mb-3 pl-2 pr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control border search\",\n    placeholder: \"Search an event in Turku...\",\n    value: query,\n    onChange: e => setQuery(e.target.value),\n    \"aria-label\": \"search events\",\n    \"aria-describedby\": \"events\",\n    onKeyPress: search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    height: \"50\",\n    width: \"50\",\n    src: \"/images/loading.gif\",\n    alt: \"LOADING\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 58\n    }\n  })), allEvents ? allEvents.map((event, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"col-lg-4 col-md-6 col-sm-6 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card clearfix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, event.images && (event.images.length > 0 ? /*#__PURE__*/React.createElement(\"img\", {\n    className: \"card-img-top img-fluid \",\n    src: event.images[0].url,\n    alt: \"event\",\n    style: {\n      width: \"100%\",\n      height: \"15vw\",\n      objectFit: 'cover'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    className: \"card-img-top img-fluid \",\n    src: \"/images/logo.png\",\n    alt: \"nothing\",\n    style: {\n      width: \"100%\",\n      height: \"15vw\",\n      objectFit: 'cover'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, event.name ? event.name.fi : 'no name'), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, event.end_time ? event.end_time.substr(0, 10) : 'no date'), event.description && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-default btn-sm\",\n    \"data-toggle\": \"collapse\",\n    \"data-target\": `#detail_event${i}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, event.description.fi ? \"Details\" : \"No details\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: `detail_event${i}`,\n    className: \"collapse card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, event.description ? parseHtml(event.description.fi ? event.description.fi : '') : ''))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"Loading\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/images/logo.png\",\n    alt: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }))));\n} // {\n//   \"id\": \"775776\",\n//   \"location\": {\n//       \"@id\": \"https://api.turku.fi/linkedevents/v1/place/1000775776/\"\n//   },\n//   \"keywords\": [\n//       {\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/keyword/petreliuksenuimahalli/\"\n//       },\n//       {\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/keyword/petreliksenvesijumpat/\"\n//       }\n//   ],\n//   \"super_event\": {\n//       \"@id\": \"https://api.turku.fi/linkedevents/v1/event/775766/\"\n//   },\n//   \"event_status\": \"EventScheduled\",\n//   \"external_links\": [],\n//   \"offers\": [\n//       {\n//           \"is_free\": false,\n//           \"info_url\": null,\n//           \"price\": {\n//               \"fi\": \"<p>Sisäänpääsymaksu (ei Seniori/Kimmokeranneke) + ohjausmaksu 2,50 euroa</p>\"\n//           },\n//           \"description\": null\n//       }\n//   ],\n//   \"data_source\": \"turku\",\n//   \"publisher\": \"ytj:0204819-8\",\n//   \"sub_events\": [],\n//   \"in_language\": [],\n//   \"audience\": [],\n//   \"custom_data\": null,\n//   \"created_time\": \"2020-08-26T11:00:03.813880Z\",\n//   \"last_modified_time\": \"2020-08-26T11:01:27.403200Z\",\n//   \"date_published\": null,\n//   \"start_time\": \"2020-11-03T08:30:00Z\",\n//   \"end_time\": \"2020-11-03T09:15:00Z\",\n//   \"super_event_type\": null,\n//   \"info_url\": null,\n//   \"location_extra_info\": null,\n//   \"name\": {\n//       \"fi\": \"Reipas vesijumppa\"\n//   },\n//   \"short_description\": null,\n//   \"description\": {\n//       \"fi\": \"<p>Reipasvauhtinen vesijumppa, jossa voit jumpata joko matalassa tai syvässä vedessä. Veden syvyys 1,60-2,20 m. Käytetään tarvittaessa kelluttavaa vesijuoksuvyötä ja/tai muita vesijumppavälineitä. Sopii hieman reippaampaa treeniä kaipaavalle.</p>\\n<p>Huom! Jumppapaikka varattava ennakkoon.</p>\\n\"\n//   },\n//   \"provider\": null,\n//   \"@id\": \"https://api.turku.fi/linkedevents/v1/event/775776/\",\n//   \"@context\": \"http://schema.org\",\n//   \"@type\": \"Event/LinkedEvent\",\n//   \"images\": [\n//       {\n//           \"id\": 13281,\n//           \"license\": \"event_only\",\n//           \"name\": \"\",\n//           \"created_time\": \"2019-08-13T06:44:47.459211Z\",\n//           \"last_modified_time\": \"2019-08-13T06:44:47.459227Z\",\n//           \"url\": \"http://www.turku.fi/sites/default/files/thumbnails/image/syvajumppavalineita_3.jpg\",\n//           \"cropping\": \"\",\n//           \"photographer_name\": null,\n//           \"data_source\": \"turku\",\n//           \"publisher\": \"ytj:0204819-8\",\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/image/13281/\",\n//           \"@context\": \"http://schema.org\",\n//           \"@type\": \"ImageObject\"\n//       }\n//   ]\n// },","map":{"version":3,"sources":["/Users/rims/Documents/musicuizz/frontend/src/components/template/ListImages.tsx"],"names":["React","useEffect","useState","FetchEventsTurku","StoreContainer","ListImages","unstated","useContainer","allEvents","setAllEvents","events","query","setQuery","url","setUrl","page","setPage","loading","setLoading","getAllEvents","res","data","meta","next","setNextEvents","previous","setPreviousEvents","match","search","e","key","trim","length","parseHtml","htmlString","replaceAll","Events","previousEvents","nextEvents","target","value","map","event","i","images","width","height","objectFit","name","fi","end_time","substr","description"],"mappings":"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AAC,oBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACU,WAAN,GAAoBnB,SAAS,CAACS,KAAK,CAACU,WAAN,CAAkBH,EAAlB,GAAuBP,KAAK,CAACU,WAAN,CAAkBH,EAAzC,GAA8C,EAA/C,CAA7B,GAAkF,EADrF,CAFD,CAJL,CADF,CALF,CADD,CADH,CADQ,gBAyBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADD,eAEC;AAAK,IAAA,GAAG,EAAC,kBAAT;AAA4B,IAAA,GAAG,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,CA3BL,CAjBF,CADF;AAoDD,C,CAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport FetchEventsTurku from '../api/FetchEventsTurku';\nimport { StoreContainer } from '../Store';\n\n\n\nexport default function ListImages() {\n  const unstated = StoreContainer.useContainer();\n  const [allEvents, setAllEvents] = useState<any>(unstated.events)\n  const [query, setQuery] = useState<string>(\"\")\n  const [url, setUrl] = useState<string>(\"https://api.turku.fi/linkedevents/v1/event/?page=1\")\n  const [page, setPage] = useState<string>(\"\")\n  const [loading, setLoading] = useState<boolean>(false)\n\n\n  const getAllEvents = async (url: any) => {\n    setLoading(true)\n    const res: any = await FetchEventsTurku(url);\n    if (res) {\n      if (res.data.meta.next)\n        unstated.setNextEvents(res.data.meta.next);\n      if (res.data.meta.previous)\n        unstated.setPreviousEvents(res.data.meta.previous);\n      // console.log(\"res events unstated\", res.data);\n      // console.log(\"unstated.setPreviousEvents\", (res.data.meta.previous));\n      // console.log(\"unstated.setNextEvents\", (res.data.meta.next));\n      setAllEvents(res.data.data);\n    }\n    setUrl(url);\n    let page: string;\n    query ? page = url.match(/=(.*)&q/) : page = url.match(/=(.*)/);\n    if (page != null)\n      page = (page[1]);\n    setPage(page ? page : \"1\");\n    setLoading(false)\n  }\n\n  const search = async (e: any) => {\n    if (e.key === \"Enter\") {\n      if (query.trim())\n        getAllEvents('https://api.turku.fi/linkedevents/v1/event/?page=1')\n      getAllEvents('https://api.turku.fi/linkedevents/v1/search/?type=event&q=' + query)\n      // setQuery('')\n    }\n  }\n\n\n\n  useEffect(() => {\n    setLoading(true);\n    if (unstated.events.length === 0)\n      getAllEvents(url);\n    setLoading(false);\n  }, [])\n\n  const parseHtml = (htmlString: any) => {\n    let res: any = htmlString.replaceAll('<p>', '').replaceAll('</p>', '\\n');\n    return (res);\n  }\n\n  return (\n    <div className=\"content\">\n      {/* <div style={{ backgroundImage: \"url(\" + \"/images/turku.png\" + \")\", backgroundPosition: 'center' }}> */}\n      <div>\n        <h1 className=\"text-center\">Events in TURKU</h1>\n        <div className=\"text-center\">\n          <button type=\"button\" className={unstated.Events ? \"btn btn-default btn-sm\": \"btn dt\"} onClick={() => getAllEvents(unstated.previousEvents)}>Previous</button>\n          <span>Page {page}</span>\n          <button type=\"button\" className={unstated.Events ? \"btn btn-default btn-sm\": \"btn dt\"} onClick={() => getAllEvents(unstated.nextEvents)}>Next</button>\n        </div>\n        <div className=\"input-group-prepend mb-3 pl-2 pr-2\">\n          <input type=\"text\" className=\"form-control border search\" placeholder=\"Search an event in Turku...\" value={query}\n            onChange={(e) => setQuery(e.target.value)} aria-label=\"search events\" aria-describedby=\"events\" onKeyPress={search} />\n          {/* {query.trim() && (\n            <button className='text-clear' onClick={() => setQuery('')} style={{ borderRadius: '50%', height: '2em' }}>X</button>\n          )} */}\n        </div>\n      </div>\n      <div className=\"d-flex row\">\n        {loading && (<div className=\"col-12 text-center\"><img height='50' width='50' src='/images/loading.gif' alt='LOADING' /></div>)}\n        {allEvents ?\n          allEvents.map((event: any, i: number) =>\n            (<div key={i} className=\"col-lg-4 col-md-6 col-sm-6 \">\n              <div className=\"card clearfix\" >\n                {event.images && (event.images.length > 0 ?\n                  <img className=\"card-img-top img-fluid \" src={event.images[0].url} alt=\"event\" style={{ width: \"100%\", height: \"15vw\", objectFit: 'cover' }} />\n                  : <img className=\"card-img-top img-fluid \" src='/images/logo.png' alt=\"nothing\" style={{ width: \"100%\", height: \"15vw\", objectFit: 'cover' }} />\n                )}\n                <div className=\"card-block\">\n                  <div className=\"card-body\">\n                    <h5 className=\"card-title\">{event.name ? event.name.fi : 'no name'}</h5>\n                    <h5 className=\"card-title\">{event.end_time ? event.end_time.substr(0, 10) : 'no date'}</h5>\n                    {event.description &&\n                      (<>\n                        <button type=\"button\" className=\"btn btn-default btn-sm\" data-toggle=\"collapse\" data-target={`#detail_event${i}`} >{event.description.fi ? \"Details\" : \"No details\"}</button>\n                        <div id={`detail_event${i}`} className=\"collapse card-text\">\n                          {event.description ? parseHtml(event.description.fi ? event.description.fi : '') : ''}\n                        </div>\n                      </>)}\n                  </div>\n                </div>\n              </div>\n            </div >)\n          )\n          :\n          (<div>\n            <p>Loading</p>\n            <img src=\"/images/logo.png\" alt=\"loading\" />\n          </div>)}\n      </div>\n    </div >\n  )\n}\n\n\n// {\n//   \"id\": \"775776\",\n//   \"location\": {\n//       \"@id\": \"https://api.turku.fi/linkedevents/v1/place/1000775776/\"\n//   },\n//   \"keywords\": [\n//       {\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/keyword/petreliuksenuimahalli/\"\n//       },\n//       {\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/keyword/petreliksenvesijumpat/\"\n//       }\n//   ],\n//   \"super_event\": {\n//       \"@id\": \"https://api.turku.fi/linkedevents/v1/event/775766/\"\n//   },\n//   \"event_status\": \"EventScheduled\",\n//   \"external_links\": [],\n//   \"offers\": [\n//       {\n//           \"is_free\": false,\n//           \"info_url\": null,\n//           \"price\": {\n//               \"fi\": \"<p>Sisäänpääsymaksu (ei Seniori/Kimmokeranneke) + ohjausmaksu 2,50 euroa</p>\"\n//           },\n//           \"description\": null\n//       }\n//   ],\n//   \"data_source\": \"turku\",\n//   \"publisher\": \"ytj:0204819-8\",\n//   \"sub_events\": [],\n//   \"in_language\": [],\n//   \"audience\": [],\n//   \"custom_data\": null,\n//   \"created_time\": \"2020-08-26T11:00:03.813880Z\",\n//   \"last_modified_time\": \"2020-08-26T11:01:27.403200Z\",\n//   \"date_published\": null,\n//   \"start_time\": \"2020-11-03T08:30:00Z\",\n//   \"end_time\": \"2020-11-03T09:15:00Z\",\n//   \"super_event_type\": null,\n//   \"info_url\": null,\n//   \"location_extra_info\": null,\n//   \"name\": {\n//       \"fi\": \"Reipas vesijumppa\"\n//   },\n//   \"short_description\": null,\n//   \"description\": {\n//       \"fi\": \"<p>Reipasvauhtinen vesijumppa, jossa voit jumpata joko matalassa tai syvässä vedessä. Veden syvyys 1,60-2,20 m. Käytetään tarvittaessa kelluttavaa vesijuoksuvyötä ja/tai muita vesijumppavälineitä. Sopii hieman reippaampaa treeniä kaipaavalle.</p>\\n<p>Huom! Jumppapaikka varattava ennakkoon.</p>\\n\"\n//   },\n//   \"provider\": null,\n//   \"@id\": \"https://api.turku.fi/linkedevents/v1/event/775776/\",\n//   \"@context\": \"http://schema.org\",\n//   \"@type\": \"Event/LinkedEvent\",\n//   \"images\": [\n//       {\n//           \"id\": 13281,\n//           \"license\": \"event_only\",\n//           \"name\": \"\",\n//           \"created_time\": \"2019-08-13T06:44:47.459211Z\",\n//           \"last_modified_time\": \"2019-08-13T06:44:47.459227Z\",\n//           \"url\": \"http://www.turku.fi/sites/default/files/thumbnails/image/syvajumppavalineita_3.jpg\",\n//           \"cropping\": \"\",\n//           \"photographer_name\": null,\n//           \"data_source\": \"turku\",\n//           \"publisher\": \"ytj:0204819-8\",\n//           \"@id\": \"https://api.turku.fi/linkedevents/v1/image/13281/\",\n//           \"@context\": \"http://schema.org\",\n//           \"@type\": \"ImageObject\"\n//       }\n//   ]\n// },"]},"metadata":{},"sourceType":"module"}